- block:

    ## Getting failure step from experiment-pod
    - name: Getting failure step from experiment pod
      shell: >
        kubectl logs {{ chaos_pod_name }} -n {{ a_ns }} | grep "FAILED!" -B 1 | head -1 | awk -F "Step:" '{print $2}'
      register: fail_step
      args: 
        executable: /bin/bash

    - name: Record the name of failed step
      set_fact:
        failStep: "{{ fail_step.stdout }}"

    - name: Print the name of failed step
      debug:
        msg: "failStep: {{ failStep }}"

  when: "flag is defined and flag == 'Fail'"

- block: 
  
    - name: Record the name of failed step
      set_fact:
        failStep: "N/A"

  when: "flag is defined and flag == 'Pass'"