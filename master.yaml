---
# mayaonline can parse this yaml to obtain tests specific to applications (based on tag) & populate test params,
# fulfill pre-requisites etc, before deployment. The params are explicitly typed to prompt right values from user.
# Test parameters can be of different kinds such as ENV, configmap etc., with their own properties.
# '@userdata' is a placeholder which is either autofilled/userfilled. If empty, use defaults. The test has tags which
# will help with categorization & application-mapping


tests:
  - name: pod_kill
    test_tags: ['mysql', 'pumba']
    specPath: ./apps/percona/tests/mysql_data_persistence/run_litmus_test.yaml
    patch:
    - name: 'Server IP'
      desc: ''
      kind: env
      type: string
      op: 'add'
      path: '/spec/template/spec/containers/0/env/-'
      value:
        name: DB_SERVER_IP
        value: 10.20.10.100
    - name: 'Username'
      desc: ''
      kind: env
      type: string
      op: 'add'
      path: '/spec/template/spec/containers/0/env/-'
      value:
        name: DB_USER
        value: root
    - name: 'Password'
      desc: ''
      kind: env
      type: string
      op: 'add'
      path: '/spec/template/spec/containers/0/env/-'
      value:
        name: DB_PASSWORD
        value: k8sDem0
    - name: 'Duration of Chaos Test'
      desc: ''
      kind: env
      type: string
      op: 'add'
      path: '/spec/template/spec/containers/0/env/-'
      value:
        name: CHAOS_DURATION
        value: '120'
          # In pod spec this still needs to be quoted/taken as string (https://github.com/kubernetes/kubernetes/issues/2763) 
